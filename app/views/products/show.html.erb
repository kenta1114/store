<div class="row">
  <div class="col-md-6">
    <!-- Product Image -->
    <div class="product-image mb-4">
      <% if @product.featured_image.attached? %>
        <%= image_tag @product.featured_image, class: "img-fluid rounded shadow-sm", alt: @product.name %>
      <% else %>
        <div class="bg-light d-flex align-items-center justify-content-center rounded" style="height: 400px;">
          <i class="fas fa-image text-muted fa-5x"></i>
        </div>
      <% end %>
    </div>
  </div>
  
  <div class="col-md-6">
    <!-- Product Information -->
    <div class="product-info">
      <% cache @product do %>
        <h1 class="display-5 mb-3"><%= @product.name %></h1>
        
        <% if @product.category.present? %>
          <p class="text-muted mb-3">
            <i class="fas fa-tag"></i> カテゴリ: <span class="badge bg-secondary"><%= @product.category %></span>
          </p>
        <% end %>
        
        <% if @product.price.present? %>
          <div class="price-info mb-4">
            <span class="h2 text-primary">¥<%= number_with_delimiter(@product.price.to_i) %></span>
            <small class="text-muted">(税込)</small>
          </div>
        <% end %>
        
        <div class="description mb-4">
          <h5>商品説明</h5>
          <div class="text-muted">
            <%= @product.description %>
          </div>
        </div>
      <% end %>
      
      <!-- Inventory Information -->
      <div class="inventory-info mb-4">
        <%= render "inventory", product: @product %>
      </div>
      
      <!-- Action Buttons -->
      <div class="d-grid gap-2 d-md-flex justify-content-md-start">
        <% if @product.inventory_count > 0 %>
          <%= form_with url: add_item_cart_path, method: :post, local: true, class: "d-flex align-items-end gap-2" do |form| %>
            <%= form.hidden_field :product_id, value: @product.id %>
            <div>
              <%= form.label :quantity, "数量", class: "form-label mb-1" %>
              <%= form.number_field :quantity, 
                  value: 1,
                  min: 1,
                  max: @product.inventory_count,
                  class: "form-control",
                  style: "width: 80px;" %>
            </div>
            <%= form.submit "カートに追加", class: "btn btn-primary btn-lg" %>
          <% end %>
          
          <button type="button" class="btn btn-outline-danger btn-lg">
            <i class="fas fa-heart"></i> お気に入り
          </button>
        <% else %>
          <button type="button" class="btn btn-secondary btn-lg" disabled>
            <i class="fas fa-times"></i> 売切れ
          </button>
        <% end %>
      </div>
      
      <!-- Admin Actions -->
      <% if authenticated? %>
        <div class="admin-actions mt-4 pt-4 border-top">
          <h6 class="text-muted">管理者操作</h6>
          <div class="d-flex gap-2">
            <%= link_to edit_product_path(@product), class: "btn btn-warning btn-sm" do %>
              <i class="fas fa-edit"></i> 編集
            <% end %>
            <%= button_to @product, method: :delete, 
                data: { turbo_confirm: "本当に削除しますか？" },
                class: "btn btn-danger btn-sm" do %>
              <i class="fas fa-trash"></i> 削除
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<!-- Back to Products -->
<div class="mt-5 pt-4 border-top">
  <%= link_to products_path, class: "btn btn-outline-secondary" do %>
    <i class="fas fa-arrow-left"></i> 商品一覧に戻る
  <% end %>
</div>

<!-- Related Products Section (future enhancement) -->
<div class="mt-5">
  <h4>関連商品</h4>
  <p class="text-muted">こちらの機能は今後実装予定です。</p>
</div>